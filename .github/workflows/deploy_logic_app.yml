name: "deploy logic app template"

on:
  workflow_dispatch: 
    # inputs:
    #   workspaceId:
    #     required: true
    #   httpTriggerURL:
    #     required: true
    #   mainManager: 
    #     required: true


jobs:
  deploy-template:
    runs-on: ubuntu-latest

    steps:
      - uses: actions/checkout@v2
      - uses: azure/login@v1
        with:
          creds: ${{ secrets.AZURE_CREDENTIALS }}
          enable-AzPSSession: true 
     
      - name: deploy template
        id: deploy
        uses: azure/powershell@v1
        with: 
          inlineScript: |
            az deployment group create -g NetworkWatcherRG --template-file ./templates/template.json --parameters workflows_logic_app_name=logic-app-storage-management 
          azPSVersion: latest




        # {% comment %} "subscription_id": {
        #     "defaultValue": "a173eef2-33d7-4d55-b0b5-18b271f8d42b",
        #     "type":"string"
        # }, {% endcomment %}
        # {% comment %} "function_app_resource_group_name":{
        #     "defaultValue": "NetworkWatcherRG",
        #     "type":"string"
        # },
        # "function_app_names":{
        #     "defaultValue": ["func-log-analytics","func-start-function","func-for-each-subscription","func-test-storages","func-end-function"],
        #     "type":"array"
        # } {% endcomment %}